import{_ as s,c as n,o as e,a as i}from"./app-90N25QkG.js";const a={},l=i(`<h1 id="vite2的配置" tabindex="-1"><a class="header-anchor" href="#vite2的配置"><span>vite2的配置</span></a></h1><p>创建项目</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 如果需要交互式命令创建</span>
<span class="line">yarn create @vitejs/app</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="vite-config-js" tabindex="-1"><a class="header-anchor" href="#vite-config-js"><span>vite.config.js</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">export default {</span>
<span class="line">  alias: {</span>
<span class="line">    &quot;@&quot;: resolve(&quot;src&quot;),</span>
<span class="line">    &quot;comps&quot;: resolve(&quot;src/components&quot;),</span>
<span class="line">    &quot;apis&quot;: resolve(&quot;src/apis&quot;),</span>
<span class="line">    &quot;views&quot;: resolve(&quot;src/views&quot;),</span>
<span class="line">    &quot;utils&quot;: resolve(&quot;src/utils&quot;),</span>
<span class="line">    &quot;routes&quot;: resolve(&quot;src/routes&quot;),</span>
<span class="line">    &quot;styles&quot;: resolve(&quot;src/styles&quot;),</span>
<span class="line">  },</span>
<span class="line">  plugins: [vue()]</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="载入不同模式下全局变量" tabindex="-1"><a class="header-anchor" href="#载入不同模式下全局变量"><span>载入不同模式下全局变量</span></a></h2><p>此外，我们也可以通过使用.env文件来载入不同环境下的全局变量，Vite中也使用了 dotenv来加载额外的环境变量，设置的全局变量必须以VITE_为前缀才可以正常被加载，使用方式如下：</p><p>.env.development</p><h3 id="以下变量在development被载入" tabindex="-1"><a class="header-anchor" href="#以下变量在development被载入"><span>以下变量在<code>development</code>被载入</span></a></h3><p>.env.production</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">VITE_APP_BASE_API = &#39;/api/v1&#39;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="以下变量在production被载入" tabindex="-1"><a class="header-anchor" href="#以下变量在production被载入"><span>以下变量在<code>production</code>被载入</span></a></h3><p>.env.production</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">VITE_APP_BASE_API = &#39;http://192.168.9.212:8888/api/v1&#39;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>全局变量使用方式：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">import.meta.env.VITE_APP_BASE_API</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后基于resolve写个小方法，方便以后新增别名使用(非必要)</p><p>function pathResolve(dir) { return resolve(__dirname, &quot;.&quot;, dir); } 接下来进入重要环节</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">export default defineConfig({</span>
<span class="line">      plugins:[vue()], // 配置需要使用的插件列表，这里将vue添加进去</span>
<span class="line"></span>
<span class="line">      // 这里是将src目录配置别名为 /@ 方便在项目中导入src目录下的文件</span>
<span class="line">      resolve: {</span>
<span class="line">          alias: {</span>
<span class="line">            &quot;/@&quot;: pathResolve(&quot;src&quot;),</span>
<span class="line">          }</span>
<span class="line">      },</span>
<span class="line">      // 强制预构建插件包</span>
<span class="line">      optimizeDeps: {</span>
<span class="line">          include: [&#39;axios&#39;],</span>
<span class="line">      },</span>
<span class="line">      // 打包配置</span>
<span class="line">      build: {</span>
<span class="line">          target: &#39;modules&#39;,</span>
<span class="line">          outDir: &#39;dist&#39;, //指定输出路径</span>
<span class="line">          assetsDir: &#39;assets&#39;, // 指定生成静态资源的存放路径</span>
<span class="line">          minify: &#39;terser&#39; // 混淆器，terser构建后文件体积更小</span>
<span class="line">      },</span>
<span class="line">      // 本地运行配置，及反向代理配置</span>
<span class="line">      server: {</span>
<span class="line">          cors: true, // 默认启用并允许任何源</span>
<span class="line">          open: true, // 在服务器启动时自动在浏览器中打开应用程序</span>
<span class="line">          //反向代理配置，注意rewrite写法，开始没看文档在这里踩了坑</span>
<span class="line">          proxy: {</span>
<span class="line">              &#39;/api&#39;: {</span>
<span class="line">                  target: &#39;http://192.168.9.212:3000&#39;,   //代理接口</span>
<span class="line">                  changeOrigin: true,</span>
<span class="line">                  rewrite: (path) =&gt; path.replace(/^\\/api/, &#39;&#39;)</span>
<span class="line">            }</span>
<span class="line">          }</span>
<span class="line">      }</span>
<span class="line">})</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上就是vue.config.js文件的基本配置，需要更多配置的可以参考文档进行配置</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">import { defineConfig } from &quot;vite&quot;;</span>
<span class="line">import { resolve } from &quot;path&quot;;</span>
<span class="line">import vue from &#39;@vitejs/plugin-vue&#39;;</span>
<span class="line">function pathResolve(dir) {</span>
<span class="line">  return resolve(__dirname, &quot;.&quot;, dir);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">export default defineConfig({</span>
<span class="line">    base: &quot;&quot;,</span>
<span class="line">    plugins:[vue()],</span>
<span class="line">    resolve: {</span>
<span class="line">        alias: {</span>
<span class="line">          &quot;/@&quot;: pathResolve(&quot;src&quot;),</span>
<span class="line">        }</span>
<span class="line">    },</span>
<span class="line">    optimizeDeps: {</span>
<span class="line">        include: [&#39;axios&#39;],</span>
<span class="line">    },</span>
<span class="line">    build: {</span>
<span class="line">      target: &#39;modules&#39;,</span>
<span class="line">      outDir: &#39;dist&#39;,</span>
<span class="line">      assetsDir: &#39;assets&#39;,</span>
<span class="line">      minify: &#39;terser&#39; // 混淆器</span>
<span class="line">    },</span>
<span class="line">    server: {</span>
<span class="line">        cors: true,</span>
<span class="line">        open: true,</span>
<span class="line">        proxy: {</span>
<span class="line">          &#39;/api&#39;: {</span>
<span class="line">              target: &#39;http://192.168.9.212:3000&#39;,   //代理接口</span>
<span class="line">              changeOrigin: true,</span>
<span class="line">              rewrite: (path) =&gt; path.replace(/^\\/api/, &#39;&#39;)</span>
<span class="line">          }</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">});</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">import { defineConfig } from &#39;vite&#39;</span>
<span class="line">import vue from &#39;@vitejs/plugin-vue&#39;</span>
<span class="line">const path = require(&#39;path&#39;)</span>
<span class="line"></span>
<span class="line">// https://vitejs.dev/config/</span>
<span class="line">export default defineConfig({</span>
<span class="line">  alias: {</span>
<span class="line">    // 配置路径别名</span>
<span class="line">    &#39;@&#39;: path.resolve(__dirname, &#39;src&#39;),</span>
<span class="line">    &#39;view&#39;: path.resolve(__dirname, &#39;src/view&#39;),</span>
<span class="line">    &#39;com&#39;: path.resolve(__dirname, &#39;src/components&#39;),</span>
<span class="line">  },</span>
<span class="line">  // 引入第三方的配置</span>
<span class="line">  // optimizeDeps: {</span>
<span class="line">  //   include: [&quot;echarts&quot;, &quot;axios&quot;, ]</span>
<span class="line">  // },</span>
<span class="line">  plugins: [vue()],</span>
<span class="line">  // hostname: &#39;0.0.0.0&#39;,</span>
<span class="line">  // port: 8090,</span>
<span class="line">  // 是否自动在浏览器打开</span>
<span class="line">  // open: true,</span>
<span class="line">  // 是否开启 https</span>
<span class="line">  https: false,</span>
<span class="line">  // 服务端渲染</span>
<span class="line">  ssr: false,</span>
<span class="line">  /**</span>
<span class="line">   * 在生产中服务时的基本公共路径。</span>
<span class="line">   * @default &#39;/&#39;</span>
<span class="line">   */</span>
<span class="line">   base: &#39;./&#39;,</span>
<span class="line">   /**</span>
<span class="line">   * 与“根”相关的目录，构建输出将放在其中。如果目录存在，它将在构建之前被删除。</span>
<span class="line">   * @default &#39;dist&#39;</span>
<span class="line">   */</span>
<span class="line">  outDir: &#39;dist&#39;,</span>
<span class="line">  server: {</span>
<span class="line">    proxy: {</span>
<span class="line">      &#39;/api&#39;: {</span>
<span class="line">        target: &#39;http://127.0.0.1:3000/&#39;,</span>
<span class="line">        changeOrigin: true,</span>
<span class="line">        ws: true,</span>
<span class="line">        pathRewrite: {</span>
<span class="line">          &quot;^/api&quot;: &quot;&quot;</span>
<span class="line">        }</span>
<span class="line">      },</span>
<span class="line">    },</span>
<span class="line">  }</span>
<span class="line">})</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22),d=[l];function p(c,v){return e(),n("div",null,d)}const t=s(a,[["render",p],["__file","vite2的配置.html.vue"]]),u=JSON.parse('{"path":"/vue3/vite2%E7%9A%84%E9%85%8D%E7%BD%AE.html","title":"vite2的配置","lang":"zh-CN","frontmatter":{},"headers":[{"level":3,"title":"vite.config.js","slug":"vite-config-js","link":"#vite-config-js","children":[]},{"level":2,"title":"载入不同模式下全局变量","slug":"载入不同模式下全局变量","link":"#载入不同模式下全局变量","children":[{"level":3,"title":"以下变量在development被载入","slug":"以下变量在development被载入","link":"#以下变量在development被载入","children":[]},{"level":3,"title":"以下变量在production被载入","slug":"以下变量在production被载入","link":"#以下变量在production被载入","children":[]}]}],"git":{"updatedTime":1724247277000,"contributors":[{"name":"前端架构师","email":"62106726+qdleader@users.noreply.github.com","commits":1}]},"filePathRelative":"vue3/vite2的配置.md"}');export{t as comp,u as data};
