import{_ as s,c as n,o as a,a as p}from"./app-90N25QkG.js";const e={},t=p(`<h1 id="项目中使用视频插件" tabindex="-1"><a class="header-anchor" href="#项目中使用视频插件"><span>项目中使用视频插件</span></a></h1><p>以vue 中使用视频插件为例：</p><h2 id="下载" tabindex="-1"><a class="header-anchor" href="#下载"><span>下载</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">npm install vue<span class="token operator">-</span>video<span class="token operator">-</span>player <span class="token operator">--</span>save<span class="token operator">-</span>dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="引入" tabindex="-1"><a class="header-anchor" href="#引入"><span>引入</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> VueVideoPlayer <span class="token keyword">from</span> <span class="token string">&#39;vue-video-player&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// require videojs style</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&#39;video.js/dist/video-js.css&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// import &#39;vue-video-player/src/custom-theme.css&#39;</span></span>
<span class="line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueVideoPlayer<span class="token punctuation">,</span> <span class="token comment">/* {</span>
<span class="line">    options: global default options,</span>
<span class="line">    events: global videojs events</span>
<span class="line">  } */</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组件中使用" tabindex="-1"><a class="header-anchor" href="#组件中使用"><span>组件中使用</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>在视频外面加一个容器<span class="token operator">--</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;input_video&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>video<span class="token operator">-</span>player  <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;video-player vjs-custom-skin&quot;</span></span>
<span class="line">                   ref<span class="token operator">=</span><span class="token string">&quot;videoPlayer&quot;</span></span>
<span class="line">                   <span class="token operator">:</span>playsinline<span class="token operator">=</span><span class="token string">&quot;true&quot;</span></span>
<span class="line">                   <span class="token operator">:</span>options<span class="token operator">=</span><span class="token string">&quot;playerOptions&quot;</span></span>
<span class="line">    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>video<span class="token operator">-</span>player<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">&#39;BusImg&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 视频播放</span></span>
<span class="line">                <span class="token literal-property property">playerOptions</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">playbackRates</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2.0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//可选择的播放速度</span></span>
<span class="line">                    <span class="token literal-property property">autoplay</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//如果true,浏览器准备好时开始回放。</span></span>
<span class="line">                    <span class="token literal-property property">muted</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 默认情况下将会消除任何音频。</span></span>
<span class="line">                    <span class="token literal-property property">loop</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 视频一结束就重新开始。</span></span>
<span class="line">                    <span class="token literal-property property">preload</span> <span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 建议浏览器在&lt;video&gt;加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）</span></span>
<span class="line">                    <span class="token literal-property property">language</span> <span class="token operator">:</span> <span class="token string">&#39;zh-CN&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">aspectRatio</span> <span class="token operator">:</span> <span class="token string">&#39;16:9&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如&quot;16:9&quot;或&quot;4:3&quot;）</span></span>
<span class="line">                    <span class="token literal-property property">fluid</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。</span></span>
<span class="line">                    <span class="token literal-property property">sources</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">type</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">src</span> <span class="token operator">:</span> <span class="token string">&#39;http://www.html5videoplayer.net/videos/madagascar3.mp4&#39;</span><span class="token comment">//url地址</span></span>
<span class="line">                    <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">poster</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">//你的封面地址</span></span>
<span class="line">                    <span class="token comment">// width: document.documentElement.clientWidth,</span></span>
<span class="line">                    <span class="token literal-property property">notSupportedMessage</span> <span class="token operator">:</span> <span class="token string">&#39;此视频暂无法播放，请稍后再试&#39;</span><span class="token punctuation">,</span> <span class="token comment">//允许覆盖Video.js无法播放媒体源时显示的默认信息。</span></span>
<span class="line">                    <span class="token literal-property property">controlBar</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">timeDivider</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//当前时间和持续时间的分隔符</span></span>
<span class="line">                        <span class="token literal-property property">durationDisplay</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//显示持续时间</span></span>
<span class="line">                        <span class="token literal-property property">remainingTimeDisplay</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//是否显示剩余时间功能</span></span>
<span class="line">                        <span class="token literal-property property">fullscreenToggle</span> <span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">//全屏按钮</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">.</span>input_video<span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">width</span><span class="token operator">:</span> 400px<span class="token punctuation">;</span></span>
<span class="line">        <span class="token literal-property property">height</span><span class="token operator">:</span> 400px<span class="token punctuation">;</span></span>
<span class="line">        <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="闭坑小技巧" tabindex="-1"><a class="header-anchor" href="#闭坑小技巧"><span>闭坑小技巧</span></a></h2><h3 id="tip1" tabindex="-1"><a class="header-anchor" href="#tip1"><span>tip1:</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">当我们要控制播放进度时候要设置currentTime，你会发现<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>videoPlayer<span class="token punctuation">.</span>duration在一些浏览器上会打印（至少现在是ios的微信浏览器是这样）<span class="token keyword">undefined</span>或<span class="token constant">NAN</span>，你可以用下面这个方法：</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">let</span> stop <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">		_this<span class="token punctuation">.</span>duration <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;vjs-tech&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>duration<span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;打印时长&quot;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;vjs-tech&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>duration<span class="token punctuation">)</span></span>
<span class="line">			document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;vjs-tech&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> currentTime</span>
<span class="line">			<span class="token function">clearInterval</span><span class="token punctuation">(</span>stop<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),l=[t];function o(i,c){return a(),n("div",null,l)}const u=s(e,[["render",o],["__file","项目中使用视频插件.html.vue"]]),d=JSON.parse('{"path":"/video_audio/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%A7%86%E9%A2%91%E6%8F%92%E4%BB%B6.html","title":"项目中使用视频插件","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"下载","slug":"下载","link":"#下载","children":[]},{"level":2,"title":"引入","slug":"引入","link":"#引入","children":[]},{"level":2,"title":"组件中使用","slug":"组件中使用","link":"#组件中使用","children":[]},{"level":2,"title":"闭坑小技巧","slug":"闭坑小技巧","link":"#闭坑小技巧","children":[{"level":3,"title":"tip1:","slug":"tip1","link":"#tip1","children":[]}]}],"git":{"updatedTime":1724247277000,"contributors":[{"name":"前端架构师","email":"62106726+qdleader@users.noreply.github.com","commits":1}]},"filePathRelative":"video&audio/项目中使用视频插件.md"}');export{u as comp,d as data};
